{% set section = "1.1" %}
{% set sectionTitle = "I do not know what to put here" %}

{% import "imports/headers.html" as headers %}
{% import "imports/images.html" as images %}
{% import "imports/components.html" as components %}

{% extends "layout.html" %}

{% block body %}
{% include "partials/contentsBegin.html" %}
<ul>
    <li><a href="#cpu">CPUs</a>
        <ul>
            <li><a href="#purp">The purpose of a CPU</a></li><li><a href="#speed">Processor speed</a></li><li><a href="#core">Processor cores</a></li><li><a href="#cache">Processor cache</a></li><li><a href="#perf">Factors affecting processor performance</a></li><li><a href="#vonn">The Von Neumann architecture</a></li><li><a href="#issues">Problems with Von Neumann</a></li><li><a href="#fde">The fetch, decode, execute cycle</a></li>
        </ul>
    </li>
    <li><a href="#embed">Embedded systems</a>
        <ul>
            <li><a href="#esys">What's an embedded system?</a></li>
        </ul>
    </li>
</ul>
{% include 'partials/contentsEnd.html' %}

<br>

{{ headers.header("cpu", "CPUs") }}

{{ images.image("../img/cpu.jpg", "A CPU") }}

<br>

{{ headers.subheader("purp", "The purpose of the CPU") }}
<p>
    The {{ components.tooltip("CPU", "Central Processing Unit") }} is often refered to as the "brains of the computer" - and it is. The CPU carries out mathematical operations, in order to process data and execute instructions. Without it, the computer would be unable to do anything, and would be an expensive paperweight.</p>

{{ headers.subheader("speed", "Processor speed") }}
<p>
    All CPUs have a speed, measured in hertz. This refers to the number of instructions (or cycles) they can process per second. Typically, today processors have speeds measured in {{ components.tooltip("gigahertz", "Abbreviated 'GHz'\nEquates to 1 billion cycles per second") }}, typically ranging from two to three gigahertz, but older processors were measured in megahertz.</p>
<p>
    <a href="http://www.mooreslaw.org/" target="_blank" rel="noopener">Moore's Law</a> relates to processor speed; it was created in the 1970s by Gordon E. Moore when he was working at Intel as president of the company. It stated that:
    <blockquote class="blockquote">
        <p class="mb-0"><i>"processor speeds, or overall processing power for computers will double every two years"</i></p>
    </blockquote>
    which proved true, for a long time, however processor speeds have reached a limit and have plateaued.</p>

{{ headers.subheader("core", "Processor cores") }}
<p>
    Within a processor, there are smaller processors called cores, where instructions are executed. Within a CPU as a whole, you can have one or multiple cores, for example a dual or quad core processor. Each core also operates independently of all the other cores.
</p>
<p>
    The benefit of having more cores in a CPU is that it gives the processor the capacity to execute as much as two instructions per tick, however this does not always happen.
</p>

{{ headers.subheader("cache", "Processor cache") }}
<p>
    All processors also have a small amount of very fast, volatile memory inside them, called cache. This cache acts as a buffer between the processor and the main system memory (RAM). This is needed because, even though RAM is fast, the processor is still faster, so it uses the processor cache in order to reduce the amount of time spent waiting for the RAM by storing commonly used instructions in the cache as well as the main memory.
</p>
<p>
    There are also three different types, or levels, of cache commonly found in CPUs. This is known as {{ components.tooltip("L1, L2 and L3", "Level one, level two and level three") }}.
    <ul>
        <li>Level 1
            <ul>
                <li>The fastest type of cache</li>
                <li>Typically about 8 to 64 kilobytes</li>
                <li>Built into the CPU, usually one set of L1 cache for each core</li>
            </ul>
        </li>
        <li>Level 2
            <ul>
                <li>Slower than L1, but also larger capacity</li>
                <li>Sometimes built into the CPU, usually a separate IC on the motherboard between the CPU and RAM</li>
            </ul>
        </li>
        <li>Level 3
            <ul>
                <li>Again slower than L2, again larger capacity</li>
            </ul>
        </li>
    </ul>
</p>

{{ headers.subheader("perf", "Factors affecting processor performance") }}
<p>
    <ul>
        <li>Clock speed
            <ul>
                <li>Doubling the clock speed will double the amount of instructions that can be executed per second</li>
            </ul>
        </li>
        <li>Cores
            <ul>
                <li>Quadrupling the number of cores may quadruple the number of instructions that can be executed per second</li>
            </ul>
        </li>
        <li>Cache size
            <ul>
                <li>Increasing the cache size will reduce the number of calls to the main memory and thus may speed up processing of these instructions as it does not have to wait for data for so long.</li>
            </ul>
        </li>
    </ul>
</p>

{{ headers.subheader("vonn", "The Von Neumann architecture") }}
<p>
    When using early computers, if you wanted to perform a calculation, you had to manually rewire the computer by hand. American computer scientist John Von Neumann had the idea that instead of storing only data in the main memory, the instructions should be stored in the main memory also. This meant the computer would be much easier to reprogram, as the program itself would effectively be treated like data. This stored-program architecture came to be known as the "Von Neumann" architecture.
</p>
<p>
    The Von Neumann architecture consists of a few main components.
    <ul>
        <li>MAR
            <ul>
                <li>Memory Address Register</li>
                <li>Stores the current memory address in use.</li>
            </ul>
        </li>
        <li>MDR
            <ul>
                <li>Memory Data Register</li>
                <li>Stores data and instructions that have been transferred from the main memory.</li>
            </ul>
        </li>
        <li>CIR
            <ul>
                <li>Current Instruction Register</li>
                <li>Instructions that have been stored by the MDR are then transferred to the CIR.</li>
            </ul>
        </li>
        <li>PC
            <ul>
                <li>Program Counter</li>
                <li>Holds the address of the next instruction in memory or the current data address in main memory.</li>
            </ul>
        </li>
        <li>ALU
            <ul>
                <li>Arithmetic Logic Unit</li>
                <li>Carries out mathematical and logical calculations.</li>
            </ul>
        </li>
        <li>Accumulator
            <ul>
                <li>Stores the result of the calculation performed by the ALU.</li>
            </ul>
        </li>
    </ul>
</p>
<p>
    The main memory and CPU are connected by three data buses - the address bus, the control bus, and the data bus. The address bus is a one way bus going from the CPU to main memory, and is used to request the contents of a specific data address from the main memory. The data bus is two way, and is used to write to and retrieve data from the main memory. The control bus is used to send instruction signals to the main memory, for example read/write commands.
</p>

{{ images.image("../img/vonneumann.jpg", "An example of the Von Neumann architecture") }}
{{ images.image("../img/controlbuses.jpg", "Control buses in a CPU") }}

{{ headers.subheader("issues", "Problems with Von Neumann") }}
<p>
    <ol>
        <li>Every piece of data and instruction has to be passed through the data bus to go between the CPU and main memory, or vice versa.
            <ul>
                <li>The issue lies within the speed of the data bus.</li>
                <li>The data bus is much slower than the rate at which the CPU works. This is called the Von Neumann bottleneck.</li>
                <li>This is solved by using <a href="#cache">cache</a>.</li>
                <li>Using cache will speed up the processor's operations as it spends less time waiting for a result of a request to the main memory every time is requires data or instructions.</li>
            </ul>
        </li>
        <li>Both data and programs use the same memory space
            <ul>
                <li>This is ok, until a poorly written program is run, and then it can write data into an area holding other instructions or data for another process, trashing the memory in the process and making it unusable.</li>
            </ul>
        </li>
        <li>The rate at which instructions and data are fetched is very different, and often calls for instructions or data occur at similar times.
            <ul>
                <li>The solution is the <a href="https://en.wikipedia.org/wiki/Harvard_architecture" target="_blank">Harvard architecture</a>.</li>
                <li>This splits the main memory into two parts - one for data, and one for instructions.</li>
                <li>Each area has separate buses, and it means that the CPU can be fetching data and instructions simultanously, which can speed up processor operation.</li>
            </ul>
        </li>
    </ol>
</p>

<h5 id="fde">The fetch, decode, execute cycle</h5>
<p>
    Every tick or clock cycle of a processor is one full FDE cycle. During an FDE cycle, there are three main stages: fetch, decode and execute.
    <ul>
        <li>Fetch
            <ul>
                <li>First off, the the program counter is incremented by one.</li>
                <li>The contents of the PC are transferred into the MAR.</li>
                <li>The memory address is derived from the MAR and sent along the address bus, and the contents of the requested memory location is transferred back to the processor by the data bus, and transferred into the MDR.</li>
                <li>The instruction is transferred to the CIR.</li>
            </ul>
        </li>
        <li>Decode
            <ul>
                <li>Within the CIR, the instruction is decoded into an op code and an operand, and held there.</li>
            </ul>
        </li>
        <li>Execute
            <ul>
                <li>The instruction is carried out by the ALU, and the result of the calculation is stored in the accumulator.</li>
            </ul>
        </li>
    </ul>
</p>

{{ headers.header("embed", "Embedded systems") }}

{{ images.image("../img/microwave.jpg", "Resultant explosion from leaving a spoon in the microwave") }}
{{ images.caption("Resultant explosion from leaving a spoon in the microwave") }}

<h5 id="esys">What's an embedded system?</h5>
<p>
    An embedded system is a computer system made up of both hardware and software. Usually, these are used for very specialised tasks, and they don't usually include a full operating system. And example of where you might find an embedded system is in a dishwasher, oven or microwave.
</p>
{% endblock %}
